(()=>{"use strict";var n=function(n,t,e,o){return new(e||(e=Promise))((function(l,i){function r(n){try{d(o.next(n))}catch(n){i(n)}}function a(n){try{d(o.throw(n))}catch(n){i(n)}}function d(n){var t;n.done?l(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,a)}d((o=o.apply(n,t||[])).next())}))};console.log("Plugin Datagrid started");class t extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.htmlElement=document.createElement("div"),this.htmlElement.className="content",this.styleElement=document.createElement("style")}connectedCallback(){return n(this,void 0,void 0,(function*(){this.shadow.appendChild(this.styleElement),this.shadow.appendChild(this.htmlElement),this.styleElement.innerHTML="\n\n  :host {\n    display: block;\n    overflow: hidden;\n    width: 100%;\n    padding: 10px 10px;\n    box-sizing: border-box;\n    font-family: var(--theme-font-family);\n    --gray: #aeaeae;\n    --cell-width: 150px;\n    --scrollbar-background: #fff;\n    --scrollbar-foreground: #b1b1b1;\n  }\n  \n  .content {\n    overflow-x: auto;\n  }\n\n  table {\n    font-size: 16px;\n    border-collapse: collapse;\n    table-layout: fixed;\n  }\n\n  td, th { \n    border: 1px solid var(--gray); \n    text-align: left;\n    width: var(--cell-width); \n  }\n\n  th {\n    border-top: none;\n    color: var(--gray);\n    font-weight: normal;\n    padding: 12px 6px;\n  }\n\n  th:first-child { \n    border-left: none;\n    width: 50px; \n    \n  }\n\n  th:last-child { \n    border-right: none; \n  }\n\n  td:last-child { \n    border-right: none; \n  }\n\n  td:first-child { \n    text-align: center;\n    border-left: none;\n    color: var(--gray);\n    font-size: 0.7em;\n  }\n\n  .cell {\n    position: relative;\n    word-wrap: break-word;\n    overflow: hidden; \n    white-space: nowrap;\n    width: var(--cell-width); \n    text-align: left;\n    padding: 12px 6px;\n  }\n\n  .cell.selected::before {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    content: '';\n    background-color: var(--theme-secondary-color);\n    opacity: 0.3;\n  }\n\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-button {\n  display: none;\n}\n\n::-webkit-scrollbar-track {}\n\n::-webkit-scrollbar-track-piece {\n  background-color: var(--scrollbar-background);\n}\n\n::-webkit-scrollbar-corner {\n  background-color: var(--scrollbar-background);\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: var(--scrollbar-foreground);\n  border-radius: 10px !important;\n}\n",yield this.refresh(),yield this.init()}))}refresh(){return n(this,void 0,void 0,(function*(){this.htmlElement.innerHTML=yield this.getHtmlContent()}))}getHtmlContent(){return n(this,void 0,void 0,(function*(){console.log("this.data ",this.data);const n=this.getColumns();return`\n      <table>\n        <tr>\n          <th></th>\n          ${n.map((n=>`<th>${n}</th>`)).join("")}\n        </tr>\n        ${this.data.items.map(((t,e)=>`\n          \n          <tr>\n            <td>${e+1}</td>\n            ${n.map(((n,o)=>`<td><div class="cell" data-row="${e}" data-column="${o}" >${t[n]}</div></td> `)).join("")}\n          <tr>\n\n        `)).join("")}          \n      </table>\n    `}))}init(){return n(this,void 0,void 0,(function*(){this.shadow.querySelectorAll("div[data-row]").forEach((n=>{n.addEventListener("click",(n=>{this.onCellClick(n)}))}))}))}onCellClick(n){const t=n.target;console.log("cell ",t);const e=t.dataset.row,o=t.dataset.column,l=t.textContent;console.log("Cell clicked:",{rowIndex:e,columnIndex:o,value:l}),this.shadow.querySelectorAll("div[data-row]").forEach((n=>{n.classList.remove("selected")})),t.classList.add("selected")}getColumns(){return Object.keys(this.data.items[0]).filter((n=>"_id"!==n&&"_index"!==n))}}zySdk.services.registry.registerComponent({id:"custom-datagrid",metadataVersion:2,icon:'\n  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24" height="24" viewBox="0 0 24 24" fill="#cccccc">    \n    <path d="M10,4V8H14V4H10M16,4V8H20V4H16M16,10V14H20V10H16M16,16V20H20V16H16M14,20V16H10V20H14M8,20V16H4V20H8M8,14V10H4V14H8M8,8V4H4V8H8M10,14H14V10H10V14M4,2H20A2,2 0 0,1 22,4V20A2,2 0 0,1 20,22H4C2.92,22 2,21.1 2,20V4A2,2 0 0,1 4,2Z" />\n  </svg> \n',label:"Data grid",category:"Plugins",subCategory:"Plugins",hidden:!1,properties:[{id:"selection",name:"Selection",type:"row-variable",tootip:"",default:"",write:!0},{id:"data",name:"Table",type:"table",tootip:"The table being used to populate",default:"",main:!0},{id:"column1",name:"Column 1",type:"column",tootip:"",default:""},{id:"column2",name:"Column 2",type:"column",tootip:"",default:""},{id:"column3",name:"Column 3",type:"column",tootip:"",default:""},{id:"column4",name:"Column 4",type:"column",tootip:"",default:""},{id:"column5",name:"Column 5",type:"column",tootip:"",default:""}],styles:[]},t)})();
//# sourceMappingURL=plugin.js.map